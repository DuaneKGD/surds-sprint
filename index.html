<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Surds Sprint — Duane Kamaragoda Tutoring</title>

<!-- MathJax for live math rendering -->
<script>
window.MathJax = { tex:{inlineMath:[['$','$'],['\\(','\\)']]}, svg:{fontCache:'global'} };
</script>
<script defer src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js"></script>

<!-- Favicon -->
<link rel="icon" href='data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="256" height="256"><rect width="100%" height="100%" fill="%2322c55e"/><text x="50%" y="55%" dominant-baseline="middle" text-anchor="middle" font-family="Arial" font-size="140" fill="white">√</text></svg>'>

<style>
  :root{
    --bg1:#ecfdf5; --bg2:#f8fafc; --card:#ffffff; --ink:#0f172a;
    --brand:#22c55e; --brand2:#10b981; --ok:#16a34a; --bad:#dc2626; --warn:#f59e0b;
    --shadow:0 12px 32px rgba(0,0,0,.10); --radius:20px;
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0; font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;
    color:var(--ink); background:linear-gradient(180deg,var(--bg1) 0%,var(--bg2) 60%);
  }
  .container{max-width:980px;margin:0 auto;padding:20px}
  .hero{
    background:linear-gradient(135deg,var(--brand),var(--brand2));
    color:#fff; border-radius:26px; padding:22px; box-shadow:var(--shadow)
  }
  .hero h1{margin:0 0 8px; font-size:32px}
  .hero p{margin:0; opacity:.92}
  .madeby{ font-size:12px; color:#e2e8f0; margin-top:8px }

  .panel{margin-top:-14px; background:var(--card); border-radius:var(--radius); padding:16px; box-shadow:var(--shadow)}
  .row{display:flex; gap:10px; flex-wrap:wrap; align-items:center}
  .grow{flex:1}
  .stat{background:#eef2f7; padding:8px 12px; border-radius:12px; font-size:14px; white-space:nowrap}
  input,button,select{
    font:inherit; padding:12px 14px; border-radius:12px; border:1px solid #e2e8f0; outline:none; transition:.15s
  }
  input:focus,select:focus{box-shadow:0 0 0 6px rgba(34,197,94,.18); border-color:#86efac}
  button{border:0; background:#16a34a; color:#fff; cursor:pointer}
  button.secondary{background:#e5e7eb; color:#111}
  button.ghost{background:transparent; border:1px solid #cbd5e1; color:#111}
  button:disabled{opacity:.6; cursor:not-allowed}
  .bigStart{
    background:linear-gradient(135deg,#16a34a,#22c55e);
    font-weight:900; font-size:22px; padding:14px 26px; border-radius:14px;
    box-shadow:0 12px 28px rgba(22,163,74,.28);
  }
  .card{background:var(--card); border-radius:var(--radius); padding:22px; box-shadow:var(--shadow); margin-top:16px}

  /* Timer bar */
  .timerWrap{position:relative; background:#e2e8f0; border-radius:999px; overflow:hidden; height:16px}
  .timer{
    position:absolute; left:0; top:0; height:100%; width:100%;
    background:linear-gradient(90deg,#22c55e,#10b981);
    transition:width .25s linear, background .25s ease, box-shadow .25s ease
  }
  .timer.warn{ background:linear-gradient(90deg,#f59e0b,#fb923c);}
  .timer.danger{ background:linear-gradient(90deg,#ef4444,#dc2626); box-shadow:0 0 12px rgba(239,68,68,.45); }
  @keyframes pulse { 0%{transform:scale(1)} 50%{transform:scale(1.02)} 100%{transform:scale(1)} }
  .timer.flash{ animation:pulse .6s ease 1; }

  .spark{
    position:absolute; top:50%; transform:translate(-50%,-50%);
    width:14px; height:14px; border-radius:50%;
    background: radial-gradient(circle at 35% 35%, #fff, #fde68a 40%, #f59e0b 70%, #f97316 100%);
    box-shadow:0 0 12px #f59e0b, 0 0 22px #fb923c, 0 0 34px rgba(249,115,22,.5);
    pointer-events:none; animation: flicker .9s infinite ease-in-out;
  }
  .spark::after{
    content:''; position:absolute; right:50%; top:50%; transform:translate(0,-50%);
    width:110px; height:6px; border-radius:6px;
    background: linear-gradient(90deg, rgba(249,115,22,.0) 0%, rgba(249,115,22,.35) 60%, rgba(249,115,22,.0) 100%);
    filter: blur(1px);
  }
  @keyframes flicker{0%{transform:translate(-50%,-50%) scale(1);opacity:.95}50%{transform:translate(-50%,-50%) scale(1.08);opacity:.85}100%{transform:translate(-50%,-50%) scale(1);opacity:.95}}

  .question{font-size:clamp(34px,6.2vw,56px);font-weight:900;letter-spacing:.4px;margin:6px 0 10px}
  .hint{color:#64748b;font-size:14px;margin-top:0}

  .mathEcho{margin-top:8px;padding:10px 12px;border-radius:12px;background:#f8fafc;border:1px dashed #cbd5e1;color:#0f172a;font-size:18px}

  .correctFlash{ position:relative; margin-bottom:8px; }
  .correctFlash::before{
    content:''; position:absolute; inset:-6px -6px; border-radius:18px; pointer-events:none;
    background: radial-gradient( circle at 50% 50%, rgba(34,197,94,.22), rgba(34,197,94,0) 55% );
    opacity:0; transition: opacity .35s ease;
  }
  .correctFlash.on::before{ opacity:1; }

  .feedback{min-height:28px; margin-top:10px}
  .ok{color:var(--ok)} .bad{color:var(--bad)} .warn{color:var(--warn)}
  .footer{color:#6b7280; font-size:12px; margin-top:18px; text-align:center}

  /* Score popups */
  .floatScore{position:absolute;pointer-events:none;left:50%;transform:translateX(-50%);font-weight:900;font-size:30px;opacity:0;animation:floatUp .9s ease forwards}
  .floatScore.ok{color:#22c55e;text-shadow:0 2px 6px rgba(34,197,94,.25)}
  .floatScore.bad{color:#ef4444;text-shadow:0 2px 6px rgba(239,68,68,.25)}
  @keyframes floatUp{0%{opacity:0;transform:translate(-50%,10px) scale(.9)}10%{opacity:1;transform:translate(-50%,0) scale(1)}100%{opacity:0;transform:translate(-50%,-40px) scale(1.05)}}

  /* Summary */
  .summary{padding:14px;border:1px solid #e5e7eb;border-radius:14px;background:#f9fafb;margin-top:10px}
  .summary h3{margin:0 0 8px}
</style>
</head>
<body>

<div class="container">
  <header class="hero">
    <h1>Surds Sprint</h1>
    <p>Simplify and rationalise surds as quickly as you can in <strong>60 seconds</strong>.</p>
    <div class="madeby">Made by <strong>Duane Kamaragoda Tutoring</strong></div>
  </header>

  <section class="panel">
    <div class="row">
      <!-- Inline name (no popups) -->
      <label class="stat">
        Name:
        <input id="nameInline" placeholder="e.g., Duane" style="margin-left:6px; width:180px">
      </label>
      <button id="saveNameInline" class="ghost">Save Name</button>

      <span class="stat">Player: <strong id="playerName">Guest</strong></span>
      <span class="stat">High score: <strong id="bestScore">0</strong></span>
      <span class="stat">Time left: <strong id="timeLeft">60</strong>s</span>
      <span class="stat">Score: <strong id="score">0</strong></span>

      <span class="grow"></span>

      <label class="stat">
        Mode:
        <select id="modeSelect">
          <option value="normal">Normal</option>
          <option value="hard">Hard</option>
        </select>
      </label>

      <button id="startBtn" class="bigStart">▶ Start</button>
      <button id="endBtn" class="secondary">End</button>
    </div>

    <div class="timerWrap" style="margin-top:12px">
      <div id="timerBar" class="timer" style="width:100%"></div>
      <div id="spark" class="spark" style="left: 100%"></div>
    </div>
    <div class="hint" style="margin-top:8px;">
      Scoring: <span class="ok"><strong>+20</strong></span> correct, <span class="bad"><strong>–10</strong></span> wrong, <span class="warn"><strong>–5</strong></span> skip.
    </div>
  </section>

  <main class="card">
    <div id="gameArea">
      <div class="correctFlash" id="correctFlash">
        <div class="question" id="question">Pick a mode and press <em>Start</em>.</div>
      </div>
      <div class="hint">Type answers in simplest surd form. You can type <code>sqrt</code> or use <code>√</code>. Skipping has a small penalty.</div>

      <div class="mathEcho">
        <div style="font-size:12px; color:#64748b; margin-bottom:6px;">Your answer (formatted):</div>
        <div id="formattedMath">—</div>
      </div>

      <div class="row" style="margin-top:14px">
        <input id="answer" class="grow" placeholder="Type your answer…" autocomplete="off"/>
        <button id="submitBtn">Submit</button>
        <button id="skipBtn" class="secondary">Skip (−5)</button>
        <button id="resetBestBtn" class="ghost">Reset High Score</button>
      </div>
      <div id="feedback" class="feedback"></div>

      <div id="summary" class="summary" style="display:none">
        <h3>Round Summary</h3>
        <div id="sumStats"></div>
        <div style="margin-top:10px">
          <button id="playAgain" class="bigStart">▶ Play Again</button>
        </div>
      </div>

      <div class="footer">© 2025 Duane Kamaragoda Tutoring — Progress is saved locally on this device (no accounts).</div>
    </div>
  </main>
</div>

<script>
/* ===== CONFIG & KEYS ===== */
const GAME_ID = 'surds-sprint-v11';
const ROUND_SECONDS = 60;
const KEY_NAME = `${GAME_ID}:name`;
const KEY_BEST_NORMAL = `${GAME_ID}:best:normal`;
const KEY_BEST_HARD   = `${GAME_ID}:best:hard`;

const SCORE_CORRECT = 20, SCORE_WRONG = -10, SCORE_SKIP = -5;

/* ===== DOM ===== */
const nameInline     = document.getElementById('nameInline');
const saveNameInline = document.getElementById('saveNameInline');

const playerNameEl = document.getElementById('playerName');
const bestScoreEl  = document.getElementById('bestScore');
const timeLeftEl   = document.getElementById('timeLeft');
const scoreEl      = document.getElementById('score');
const questionEl   = document.getElementById('question');
const answerEl     = document.getElementById('answer');
const feedbackEl   = document.getElementById('feedback');
const timerBar     = document.getElementById('timerBar');
const spark        = document.getElementById('spark');
const startBtn     = document.getElementById('startBtn');
const endBtn       = document.getElementById('endBtn');
const submitBtn    = document.getElementById('submitBtn');
const skipBtn      = document.getElementById('skipBtn');
const resetBestBtn = document.getElementById('resetBestBtn');
const modeSelect   = document.getElementById('modeSelect');
const formattedMath= document.getElementById('formattedMath');
const correctFlash = document.getElementById('correctFlash');
const summaryBox   = document.getElementById('summary');
const sumStatsEl   = document.getElementById('sumStats');
const playAgainBtn = document.getElementById('playAgain');

/* ===== STATE ===== */
let running = false, score = 0, bestNormal = 0, bestHard = 0;
let timeLeft = ROUND_SECONDS, timerId = null, lastDangerPulseAt = Infinity;
let currentQ = null, deck = [];
let stats = {attempted:0, correct:0, wrong:0, skipped:0};

/* ===== STORAGE ===== */
const loadName = () => localStorage.getItem(KEY_NAME) || '';
const saveName = n => localStorage.setItem(KEY_NAME, n);
const loadBestNormal = () => Number(localStorage.getItem(KEY_BEST_NORMAL) || 0);
const loadBestHard   = () => Number(localStorage.getItem(KEY_BEST_HARD) || 0);
const saveBestNormal = v => localStorage.setItem(KEY_BEST_NORMAL, String(v));
const saveBestHard   = v => localStorage.setItem(KEY_BEST_HARD, String(v));

/* ===== AUDIO (correct / wrong / skip) ===== */
let audioCtx = null;
function ensureAudio(){ if (!audioCtx) audioCtx = new (window.AudioContext || window.webkitAudioContext)(); }
function tone(freq=880, dur=0.10, type='sine', gain=0.05){
  ensureAudio();
  const osc = audioCtx.createOscillator(); const g = audioCtx.createGain();
  osc.type = type; osc.frequency.value = freq; g.gain.value = gain;
  osc.connect(g); g.connect(audioCtx.destination);
  osc.start(); setTimeout(()=>osc.stop(), dur*1000);
}
function soundCorrect(){ tone(784,.10,'triangle',0.06); setTimeout(()=>tone(988,.10,'triangle',0.05),70); setTimeout(()=>tone(1175,.12,'triangle',0.05),130); }
function soundWrong(){ tone(220,.12,'square',0.06); setTimeout(()=>tone(180,.12,'square',0.06),90); }
function soundSkip(){ tone(520,.06,'sine',0.04); setTimeout(()=>tone(620,.06,'sine',0.03),70); }

/* ===== UTILS ===== */
function currentMode(){ return modeSelect.value || 'normal'; }
function renderHeader(){
  playerNameEl.textContent = loadName() || 'Guest';
  timeLeftEl.textContent   = timeLeft;
  scoreEl.textContent      = score;
  bestScoreEl.textContent  = currentMode()==='normal' ? bestNormal : bestHard;
}
function setTimerBar(){
  const pct = Math.max(0, Math.min(100, 100 * (timeLeft / ROUND_SECONDS)));
  timerBar.style.width = pct + '%';
  const wrap = document.querySelector('.timerWrap');
  const wrapW = wrap.clientWidth;
  const x = Math.max(10, Math.min(wrapW-10, (pct/100)*wrapW));
  spark.style.left = `${x}px`;
  timerBar.classList.remove('warn','danger');
  if (pct <= 35 && pct > 15) timerBar.classList.add('warn');
  if (pct <= 15){
    timerBar.classList.add('danger');
    if (timeLeft < lastDangerPulseAt - 3){
      timerBar.classList.add('flash');
      setTimeout(()=>timerBar.classList.remove('flash'), 600);
      lastDangerPulseAt = timeLeft;
    }
  }
}
function normalise(s){ return s.replace(/\s+/g,'').replace(/sqrt/gi,'√').replace(/\*/g,'').toLowerCase(); }
function evalSurd(expr){
  try{
    let s = expr.replace(/\s+/g,'').replace(/√/g,'Math.sqrt').replace(/(\d)(Math\.sqrt)/g,'$1*$2');
    if (s.includes('/')){ const [num,den] = s.split('/'); return (Function(`return (${num})/(${den})`))(); }
    return (Function(`return (${s})`))();
  }catch{ return null; }
}
function approxEqual(aStr,bStr){
  const a = evalSurd(aStr), b = evalSurd(bStr);
  if (a==null || b==null) return false;
  return Math.abs(a-b) < 1e-6;
}
function animateScoreTo(target){
  const start = Number(scoreEl.textContent)||0;
  const diff = target - start, dur = 300, t0 = performance.now();
  function step(now){
    const p = Math.min(1, (now - t0)/dur);
    const eased = p<.5 ? 2*p*p : 1 - Math.pow(-2*p+2,2)/2;
    scoreEl.textContent = Math.round(start + diff*eased);
    if (p < 1) requestAnimationFrame(step);
  }
  requestAnimationFrame(step);
}
function floatScore(text, ok=true){
  const el = document.createElement('div');
  el.className = 'floatScore ' + (ok ? 'ok':'bad');
  el.textContent = text;
  document.body.appendChild(el);
  const cardRect = document.querySelector('.card').getBoundingClientRect();
  el.style.top = (cardRect.top + 18) + 'px';
  setTimeout(()=> el.remove(), 1000);
}

/* ===== QUESTION BANKS ===== */
const BANK_NORMAL = [
  ['Simplify √8','2√2'],['Simplify √12','2√3'],['Simplify √18','3√2'],['Simplify √20','2√5'],
  ['Simplify √24','2√6'],['Simplify √27','3√3'],['Simplify √28','2√7'],['Simplify √32','4√2'],
  ['Simplify √45','3√5'],['Simplify √48','4√3'],['Simplify √50','5√2'],['Simplify √72','6√2'],
  ['Simplify √98','7√2'],['Simplify √75','5√3'],['Simplify √63','3√7'],['Simplify √80','4√5'],
  ['Simplify √2 + √2','2√2'],['Simplify 2√3 + √3','3√3'],['Simplify 3√5 - √5','2√5'],
  ['Simplify 4√2 - 3√2','√2'],['Simplify 5√7 + 2√7','7√7'],['Simplify 6√3 - 4√3','2√3'],
  ['Simplify √6 + √6 + √6','3√6'],['Simplify 2√10 - √10','√10'],
  ['Rationalise 1/√2','√2/2'],['Rationalise 1/√3','√3/3'],['Rationalise 1/√5','√5/5'],
  ['Rationalise 2/√2','√2'],['Rationalise 3/√3','√3'],['Rationalise √3/√3','1'],
].map(([p,a])=>({p,a}));

const BANK_HARD = [
  ['Simplify √200','10√2'],['Simplify √300','10√3'],['Simplify √245','7√5'],
  ['Simplify √432','12√3'],['Simplify √500','10√5'],
  ['Simplify 2√8 + 3√8','10√2'],
  ['Simplify 4√12 - 2√12','4√3'],
  ['Simplify 3√18 + √8','11√2'],
  ['Simplify √12 + √27','5√3'],
  ['Simplify 3√2 + 5√8','13√2'],
  ['Simplify 4√18 - √8','10√2'],
  ['Simplify (√3)^2','3'],['Simplify (2√5)^2','20'],['Simplify √2·√8','4'],
  ['Rationalise 6/(√5+√2)','2(√5-√2)'],
  ['Rationalise 3/(2√2)','3√2/4'],
  ['Rationalise 5/(√7-√2)','√7+√2'],
  ['Rationalise 1/√6','√6/6'],
].map(([p,a])=>({p,a}));

function shuffled(arr){
  const a = arr.slice();
  for (let i=a.length-1;i>0;i--){
    const j = Math.floor(Math.random()*(i+1));
    [a[i],a[j]] = [a[j],a[i]];
  }
  return a;
}
function makeDeck(mode){ return shuffled(mode==='hard' ? BANK_HARD : BANK_NORMAL); }

function nextQuestion(){
  if (deck.length === 0) deck = makeDeck(currentMode());
  currentQ = deck.pop();
  questionEl.textContent = currentQ.p;
  feedbackEl.textContent = '';
  answerEl.value = '';
  updateFormattedEcho('');
  answerEl.focus();
}

/* ===== START / END / SUBMIT FLOW ===== */
function start(){
  if (running) return;
  summaryBox.style.display = 'none';
  stats = {attempted:0, correct:0, wrong:0, skipped:0};
  // Save inline name (or use Guest)
  const n = (nameInline.value || '').trim();
  if (n) saveName(n); else saveName('Guest');

  running = true;
  score = 0;
  timeLeft = ROUND_SECONDS;
  lastDangerPulseAt = Infinity;
  timerBar.classList.remove('warn','danger','flash');
  deck = makeDeck(currentMode());
  nextQuestion();
  renderHeader();
  setTimerBar();

  timerId = setInterval(()=>{
    timeLeft--;
    timeLeftEl.textContent = timeLeft;
    setTimerBar();
    if (timeLeft <= 0) end();
  },1000);
}

function end(){
  if (!running) return;
  running = false;
  clearInterval(timerId); timerId = null;

  const mode = currentMode();
  let isHigh = false;
  if (mode==='normal'){
    if (score > bestNormal){ bestNormal = score; saveBestNormal(bestNormal); isHigh = true; }
  } else {
    if (score > bestHard){ bestHard = score; saveBestHard(bestHard); isHigh = true; }
  }
  const attempted = stats.attempted || 1;
  const acc = Math.round((stats.correct/attempted)*100);

  sumStatsEl.innerHTML = `
    <div><strong>Final score:</strong> ${score} ${isHigh?'<span class="ok">— New high score!</span>':''}</div>
    <div style="margin-top:6px; display:flex; gap:14px; flex-wrap:wrap;">
      <span>Attempted: <strong>${stats.attempted}</strong></span>
      <span class="ok">Correct: <strong>${stats.correct}</strong></span>
      <span class="bad">Wrong: <strong>${stats.wrong}</strong></span>
      <span class="warn">Skipped: <strong>${stats.skipped}</strong></span>
      <span>Accuracy: <strong>${acc}%</strong></span>
      <span>Mode: <strong>${mode}</strong></span>
    </div>
  `;
  summaryBox.style.display = 'block';

  renderHeader();
  questionEl.textContent = 'Pick a mode and press Start.';
  feedbackEl.textContent = '';
  answerEl.value = '';
  updateFormattedEcho('');
}

function submit(){
  if (!running) return;
  const user = normalise(answerEl.value);
  const correct = normalise(currentQ.a);
  if (!user) return;

  stats.attempted++;
  if (user === correct || approxEqual(user, correct)){
    stats.correct++;
    const newScore = score + SCORE_CORRECT;
    floatScore('+'+SCORE_CORRECT, true); soundCorrect();
    animateScoreTo(newScore); score = newScore;
    flashCorrect();
    nextQuestion();
    feedbackEl.innerHTML = `<span class="ok">Nice! Keep going.</span>`;
  } else {
    stats.wrong++;
    const newScore = Math.max(0, score + SCORE_WRONG);
    floatScore(String(SCORE_WRONG), false); soundWrong();
    animateScoreTo(newScore); score = newScore;
    feedbackEl.innerHTML = `<span class="bad">Not quite — try again or skip (−5).</span>`;
  }
}

function skip(){
  if (!running) return;
  stats.skipped++;
  const newScore = Math.max(0, score + SCORE_SKIP);
  floatScore(String(SCORE_SKIP), false); soundSkip();
  animateScoreTo(newScore); score = newScore;
  nextQuestion();
  feedbackEl.innerHTML = `<span class="warn">Skipped — small penalty. Keep going!</span>`;
}

function flashCorrect(){
  correctFlash.classList.add('on');
  setTimeout(()=>correctFlash.classList.remove('on'), 220);
}

/* ===== FORMATTED ECHO (MathJax) ===== */
function toTeX(raw){
  if (!raw) return '\\text{—}';
  let s = raw.replace(/sqrt/gi, '√');
  const fracMatch = s.match(/^([^\/]+)\/([^\/]+)$/);
  if (fracMatch){
    const num = fracMatch[1], den = fracMatch[2];
    return `\\frac{${ partToTeX(num) }}{${ partToTeX(den) }}`;
  }
  s = s.replace(/·/g, '\\cdot ');
  s = s.replace(/√\(([^)]+)\)/g, (_,inner)=>`\\sqrt{${ partToTeX(inner) }}`);
  s = s.replace(/√(\d+(\.\d+)?)/g, (_,num)=>`\\sqrt{${num}}`);
  s = s.replace(/√([a-zA-Z]+)/g, (_,sym)=>`\\sqrt{${sym}}`);
  return s;
}
function partToTeX(part){
  let p = part.trim().replace(/sqrt/gi,'√');
  p = p.replace(/√\(([^)]+)\)/g, (_,inner)=>`\\sqrt{${ partToTeX(inner) }}`);
  p = p.replace(/√(\d+(\.\d+)?)/g, (_,num)=>`\\sqrt{${num}}`);
  p = p.replace(/·/g,'\\cdot ');
  return p;
}
function updateFormattedEcho(raw){
  const tex = toTeX(raw);
  formattedMath.innerHTML = `\\(${tex}\\)`;
  if (window.MathJax) MathJax.typesetPromise([formattedMath]);
}

/* ===== EVENTS ===== */
startBtn.onclick = start;
playAgainBtn.onclick = start;
endBtn.onclick   = end;
submitBtn.onclick= submit;
skipBtn.onclick  = skip;
resetBestBtn.onclick = ()=>{
  if (confirm('Reset high scores on this device for both modes?')){
    bestNormal = 0; bestHard = 0; saveBestNormal(0); saveBestHard(0); renderHeader();
  }
};
modeSelect.onchange = ()=> renderHeader();
answerEl.addEventListener('keydown', e=>{ if (e.key === 'Enter') submit(); });
answerEl.addEventListener('input', (e)=> updateFormattedEcho(e.target.value) );

saveNameInline.onclick = ()=>{
  const n = (nameInline.value || '').trim();
  saveName(n || 'Guest');
  renderHeader();
};

/* ===== INIT ===== */
(function init(){
  bestNormal = loadBestNormal();
  bestHard   = loadBestHard();

  const existingName = loadName();
  nameInline.value = existingName || '';
  renderHeader();
  updateFormattedEcho('');
})();
</script>
</body>
</html>
